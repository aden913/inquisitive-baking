<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Inquisitive Baking</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playwrite+BR:wght@100..400&family=Playwrite+FR+Moderne:wght@100..400&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="styles.css">
    <link rel="icon" href="images/favicon3_io/favicon-16x16.png" type="image/x-icon">
    <script src="config.js"></script>
</head>
<body>

<header class="playwrite-fr-moderne-font">
    <img src="images/cakeLogo.png" id="logo">
    Inquisitive Baking
    <i class="fa fa-shopping-cart cart-icon" style="font-size:26px;color:#d7be82" onclick="openCart()"></i>
    <span class="cart-count">0</span>
</header>

<div class="container">
    <!-- Product 1: Meringue Cookies -->
    <div class="product-box">
        <img src="https://via.placeholder.com/300" alt="Baked Good 1">
        <h3 class="playwrite-fr-moderne-font">Meringue Cookies</h3>
        <p class="playwrite-fr-moderne-font">This is a delicious baked good with a description about its taste, ingredients, and texture.</p>
        <button class="purchase-btn" onclick="addToCart('Meringue Cookies', 10.00)">Add to Cart</button>
    </div>

    <!-- Product 2: Brown Butter Chocolate Chip Cookies -->
    <div class="product-box">
        <img src="https://via.placeholder.com/300" alt="Baked Good 2">
        <h3 class="playwrite-fr-moderne-font">Brown Butter Chocolate Chip Cookies</h3>
        <p class="playwrite-fr-moderne-font">This is another amazing baked good, sure to satisfy your cravings for something sweet.</p>
        <button class="purchase-btn" onclick="addToCart('Brown Butter Chocolate Chip Cookies', 12.00)">Add to Cart</button>
    </div>

    <!-- Product 3: Cinnamon Roll Blondies -->
    <div class="product-box">
        <img src="https://via.placeholder.com/300" alt="Baked Good 3">
        <h3 class="playwrite-fr-moderne-font">Cinnamon Roll Blondies</h3>
        <p class="playwrite-fr-moderne-font">Try this irresistible baked treat, perfect for any occasion or just because!</p>
        <button class="purchase-btn" onclick="addToCart('Cinnamon Roll Blondies', 8.00)">Add to Cart</button>
    </div>

    <!-- Product 4: Brownies -->
    <div class="product-box">
        <img src="images/brownies.jpg" alt="Baked Good 4">
        <h3 class="playwrite-fr-moderne-font">Brownies - 8 brownies $6</h3>
        <p class="playwrite-fr-moderne-font">Throw away your Ghiradellis brownie mix because I found a way to use their chocolate and create a moist brownie with multiple layers of chocolate flavour! Again I am by no means a fan of chocolate but this brownie with it's rich chocolate taste with a hint of buttery undertones is a hit in my book!</p>
        <button class="purchase-btn" onclick="addToCart('Brownies', 6.00)">Add to Cart</button>
    </div>

    <!-- Product 5: Brownie Cookies -->
    <div class="product-box">
        <img src="images/brownieCookies.jpg" alt="Baked Good 5">
        <h3 class="playwrite-fr-moderne-font">Brownie Cookies - 6 cookies $7</h3>
        <p class="playwrite-fr-moderne-font">Have you ever wished that when you make brownies there were more corner pieces? These cookies taste like the best corner pieces of a batch of brownies!</p>
        <button class="purchase-btn" onclick="addToCart('Brownie Cookies', 5.00)">Add to Cart</button>
    </div>

    <!-- Product 6: Shortbread -->
    <div class="product-box">
        <img src="https://via.placeholder.com/300" alt="Baked Good 6">
        <h3 class="playwrite-fr-moderne-font">Shortbread</h3>
        <p class="playwrite-fr-moderne-font">A traditional Scottish shortbread recipe with a delicate buttery texture that melts in your mouth.</p>
        <button class="purchase-btn" onclick="addToCart('Shortbread', 5.00)">Add to Cart</button>
    </div>
</div>

<div id="cartOverlay" class="cart-overlay"></div>

<!-- Cart Sidebar -->
<div id="cartSidebar" class="cart-sidebar">
    <button class="close-btn" style="color:#d7be82" onclick="closeCart()">X</button>
    <h2 style="background-color: #515a47; padding:20px;margin:0; color:#d7be82;">Your Cart</h2>
    <div class="cart-items"></div>
    <div class="cart-footer">
        <button id="proceedButton" disabled onclick="proceedToPurchase()">Proceed to Purchase</button>
    </div>
</div>

<script>
    let cart = JSON.parse(localStorage.getItem('cart')) || [];
    const cartSidebar = document.getElementById('cartSidebar');
    const cartCount = document.querySelector('.cart-count');
    const cartItems = document.querySelector('.cart-items');
    const proceedButton = document.getElementById('proceedButton');
    const cartOverlay = document.getElementById('cartOverlay');

    function openCart() {
        cartSidebar.classList.toggle('open');
        cartOverlay.classList.toggle('open');
        updateCart();
    }

    cartOverlay.addEventListener('click', () => {
        cartSidebar.classList.remove('open');
        cartOverlay.classList.remove('open');
    });

    function addToCart(product, price) {
    const existingProduct = cart.find(item => item.product === product);
    if (existingProduct) {
        // Increase the quantity if the product already exists
        existingProduct.quantity += 1;
    } else {
        // Otherwise, add a new product with quantity 1
        cart.push({ product, price, quantity: 1 });
    }
    localStorage.setItem('cart', JSON.stringify(cart));
    updateCart();
}

function updateQuantity(index, newQuantity) {
    // Update the quantity of the product at the given index
    if (newQuantity < 1) return; // Ensure the quantity stays at 1 or above
    cart[index].quantity = parseInt(newQuantity);
    localStorage.setItem('cart', JSON.stringify(cart));
    updateCart();
}


    function updateCart() {
        cartItems.innerHTML = '';
        let totalItems = 0; // Track total quantity of items
        cart.forEach((item, index) => {
            const cartItem = document.createElement('div');
            cartItem.classList.add('cart-item');
            cartItem.innerHTML = `
                <span>${item.product} - $${item.price.toFixed(2)}</span>
                <input type="number" value="${item.quantity}" min="1" onchange="updateQuantity(${index}, this.value)">
                <button onclick="removeFromCart(${index})">Remove</button>
            `;
            cartItems.appendChild(cartItem);

            // Sum the quantities of all items in the cart
            totalItems += item.quantity;
        });

        // Update cart icon with the total quantity of all items in the cart
        cartCount.textContent = totalItems;
        proceedButton.disabled = cart.length === 0;
    }
function removeFromCart(index) {
        cart.splice(index, 1);
        localStorage.setItem('cart', JSON.stringify(cart));
        updateCart();
    }
    

    function proceedToPurchase() {
        // Redirect to the purchase page
        window.location.href = 'purchasePage.html';
        console.log('Proceeding to purchase with:', cart);
    }

    // Initial cart update on page load
    updateCart();

</script>

</body>
</html>
